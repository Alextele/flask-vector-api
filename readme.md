–°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è saiga_yandexgpt:
 - 9GB RAM for q8_0 and less for smaller quantizations
---

1) docker build -t flask-vector-api .
2) docker run -d --rm -p 5000:5000 --name my-flask-app flask-vector-api

---

## üìå –≠–Ω–¥–ø–æ–∏–Ω—Ç `/vector`

–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

### üî∏ –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

```json
{
  "question": "–ö–∞–∫–∏–µ –µ—Å—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã ChatGPT –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞?"
}
```
### üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

| –ü–æ–ª–µ      | –¢–∏–ø    | –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | –û–ø–∏—Å–∞–Ω–∏–µ                                                       |
|-----------|--------|------------|---------------------------------------------------------------|
| `question`| string | ‚úÖ –¥–∞      | –í–æ–ø—Ä–æ—Å, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ |

### üî∏ –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞
```json
{
  "vector": [0.1345, 0.2356, 0.4567, ...]
}
```

---

## üìå –≠–Ω–¥–ø–æ–∏–Ω—Ç `/generate`

–ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –º–æ–¥–µ–ª–∏ —Å —É—á—ë—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –∞ –∑–∞—Ç–µ–º –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç.

### üî∏ –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

```json
{
  "question": "–ö–∞–∫–∏–µ –µ—Å—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã ChatGPT –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞?",
  "context": [
    "ChatGPT ‚Äî —ç—Ç–æ –ø–æ–ø—É–ª—è—Ä–Ω–∞—è –º–æ–¥–µ–ª—å –æ—Ç OpenAI.",
    "–î–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –º–æ–¥–µ–ª–∏ –æ—Ç Sber, Yandex –∏ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–∞–Ω–∏–π.",
    "Saiga ‚Äî —ç—Ç–æ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–∞—è –º–æ–¥–µ–ª—å, —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è —Å llama.cpp."
  ],
  "system_prompt": "–¢—ã ‚Äî –°–∞–π–≥–∞, —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –¢—ã —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–µ—à—å —Å –ª—é–¥—å–º–∏ –∏ –ø–æ–º–æ–≥–∞–µ—à—å –∏–º.",
  "temperature": 0.7,
  "top_k": 40,
  "top_p": 0.95,
  "repeat_penalty": 1.2,
  "stream": false,
  "n_ctx": 8192,
  "max_tokens": 512
}
```

### üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

| –ü–æ–ª–µ          | –¢–∏–ø      | –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 |
|---------------|----------|------------|--------------------------------------------------------------------------|
| `question`    | string   | ‚úÖ –¥–∞      | –°–∞–º –≤–æ–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –∑–∞–¥–∞—ë—Ç–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É                                |
| `context`     | array    | ‚ùå –Ω–µ—Ç     | –ö–æ–Ω—Ç–µ–∫—Å—Ç (–∏—Å—Ç–æ—á–Ω–∏–∫–∏/–æ—Ç–≤–µ—Ç—ã), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ —É—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ |
| `system_prompt` | string | ‚ùå –Ω–µ—Ç     | –°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è –∏ —Ä–æ–ª—å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî ¬´–¢—ã ‚Äî –°–∞–π–≥–∞...¬ª         |
| `temperature` | float    | ‚ùå –Ω–µ—Ç     | –°–ª—É—á–∞–π–Ω–æ—Å—Ç—å –≤—ã–≤–æ–¥–∞. –ë–æ–ª—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí –±–æ–ª–µ–µ –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 0.6‚Äì0.9) |
| `top_k`       | int      | ‚ùå –Ω–µ—Ç     | –°—ç–º–ø–ª–∏–Ω–≥ –∏–∑ k –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ (0 = –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)          |
| `top_p`       | float    | ‚ùå –Ω–µ—Ç     | –°—ç–º–ø–ª–∏–Ω–≥ –ø–æ –∫—É–º—É–ª—è—Ç–∏–≤–Ω–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏. 0.9 ‚Üí –±–µ—Ä—É—Ç—Å—è —Ç–æ–∫–µ–Ω—ã —Å —Å—É–º–º–∞—Ä–Ω–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 90% |
| `repeat_penalty` | float | ‚ùå –Ω–µ—Ç     | –®—Ç—Ä–∞—Ñ –∑–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è. –ó–Ω–∞—á–µ–Ω–∏—è >1.0 –¥–µ–ª–∞—é—Ç —Ä–µ—á—å –º–µ–Ω–µ–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–π—Å—è       |
| `stream`      | bool     | ‚ùå –Ω–µ—Ç     | –ï—Å–ª–∏ true, –º–æ–¥–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç –ø–æ —á–∞—Å—Ç—è–º (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ SSE, WebSocket –∏ –ø—Ä.) |
| `n_ctx`       | int      | ‚ùå –Ω–µ—Ç     | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä—ë–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (—Ç–æ–∫–µ–Ω–æ–≤). –£ Saiga 8b –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–æ 8192 |
| `max_tokens`  | int      | ‚ùå –Ω–µ—Ç     | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –æ–±—â–µ–π –¥–ª–∏–Ω–æ–π —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º) |

### üî∏ –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞

```json
{
  "reply": "–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã ChatGPT –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –≤–∫–ª—é—á–∞—é—Ç –º–æ–¥–µ–ª–∏ –æ—Ç –°–±–µ—Ä, –Ø–Ω–¥–µ–∫—Å–∞ –∏ –¥—Ä—É–≥–∏–µ. –≠—Ç–∏ –º–æ–¥–µ–ª–∏ —Ç–æ–∂–µ –æ–±–ª–∞–¥–∞—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ."
}
```